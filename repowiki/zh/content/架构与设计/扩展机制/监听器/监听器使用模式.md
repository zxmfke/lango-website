# ç›‘å¬å™¨ä½¿ç”¨æ¨¡å¼

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [examples/listeners/main.go](file://examples/listeners/main.go)
- [examples/basic_example/main.go](file://examples/basic_example/main.go)
- [examples/streaming_modes/main.go](file://examples/streaming_modes/main.go)
- [graph/listeners.go](file://graph/listeners.go)
- [graph/builtin_listeners.go](file://graph/builtin_listeners.go)
- [graph/streaming.go](file://graph/streaming.go)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [ç›‘å¬å™¨æ¶æ„æ¦‚è§ˆ](#ç›‘å¬å™¨æ¶æ„æ¦‚è§ˆ)
3. [å†…ç½®ç›‘å¬å™¨ç±»å‹](#å†…ç½®ç›‘å¬å™¨ç±»å‹)
4. [ç›‘å¬å™¨é…ç½®ä¸ä½¿ç”¨](#ç›‘å¬å™¨é…ç½®ä¸ä½¿ç”¨)
5. [æµå¼å¤„ç†é›†æˆ](#æµå¼å¤„ç†é›†æˆ)
6. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
7. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
8. [æ€»ç»“](#æ€»ç»“)

## ç®€ä»‹

LangGraphGo æä¾›äº†å¼ºå¤§çš„ç›‘å¬å™¨ç³»ç»Ÿï¼Œå…è®¸å¼€å‘è€…åœ¨å›¾æ‰§è¡Œè¿‡ç¨‹ä¸­å®æ—¶æ•è·å’Œå“åº”å„ç§äº‹ä»¶ã€‚ç›‘å¬å™¨ç³»ç»Ÿæ”¯æŒå¤šç§ä½¿ç”¨åœºæ™¯ï¼ŒåŒ…æ‹¬æ—¥å¿—è®°å½•ã€è¿›åº¦è·Ÿè¸ªã€æ€§èƒ½ç›‘æ§å’Œç”¨æˆ·äº¤äº’åé¦ˆã€‚é€šè¿‡ç›‘å¬å™¨ï¼Œå¯ä»¥å®ç°å¯¹å›¾æ‰§è¡Œè¿‡ç¨‹çš„å…¨é¢å¯è§‚æµ‹æ€§ï¼Œä¸ºè°ƒè¯•ã€ç›‘æ§å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–æä¾›é‡è¦æ”¯æŒã€‚

## ç›‘å¬å™¨æ¶æ„æ¦‚è§ˆ

ç›‘å¬å™¨ç³»ç»ŸåŸºäºè§‚å¯Ÿè€…æ¨¡å¼è®¾è®¡ï¼Œæä¾›äº†çµæ´»çš„äº‹ä»¶é€šçŸ¥æœºåˆ¶ã€‚æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬äº‹ä»¶ç±»å‹å®šä¹‰ã€ç›‘å¬å™¨æ¥å£ã€å¯ç›‘å¬èŠ‚ç‚¹å’Œæµå¼å¤„ç†æ”¯æŒã€‚

```mermaid
classDiagram
class NodeListener {
<<interface>>
+OnNodeEvent(ctx, event, nodeName, state, err)
}
class ListenableNode {
+Node
+listeners []NodeListener
+mutex sync.RWMutex
+AddListener(listener)
+RemoveListener(listener)
+NotifyListeners(ctx, event, state, err)
+Execute(ctx, state)
}
class StreamEvent {
+Timestamp time.Time
+NodeName string
+Event NodeEvent
+State interface{}
+Error error
+Metadata map[string]interface{}
+Duration time.Duration
}
class ProgressListener {
+writer io.Writer
+nodeSteps map[string]string
+showTiming bool
+showDetails bool
+prefix string
+SetNodeStep(nodeName, step)
+OnNodeEvent(ctx, event, nodeName, state, err)
}
class LoggingListener {
+logger *log.Logger
+logLevel LogLevel
+includeState bool
+WithLogLevel(level)
+WithState(enabled)
+OnNodeEvent(ctx, event, nodeName, state, err)
}
class MetricsListener {
+nodeExecutions map[string]int
+nodeDurations map[string][]time.Duration
+nodeErrors map[string]int
+totalExecutions int
+GetNodeExecutions()
+GetNodeAverageDuration()
+PrintSummary(writer)
}
class ChatListener {
+writer io.Writer
+nodeMessages map[string]string
+showTime bool
+SetNodeMessage(nodeName, message)
+OnNodeEvent(ctx, event, nodeName, state, err)
}
NodeListener <|.. ProgressListener
NodeListener <|.. LoggingListener
NodeListener <|.. MetricsListener
NodeListener <|.. ChatListener
ListenableNode --> NodeListener : "notifies"
ListenableNode --> StreamEvent : "generates"
```

**å›¾è¡¨æ¥æº**
- [graph/listeners.go](file://graph/listeners.go#L51-L185)
- [graph/builtin_listeners.go](file://graph/builtin_listeners.go#L14-L433)

**ç« èŠ‚æ¥æº**
- [graph/listeners.go](file://graph/listeners.go#L1-L335)
- [graph/builtin_listeners.go](file://graph/builtin_listeners.go#L1-L433)

## å†…ç½®ç›‘å¬å™¨ç±»å‹

### è¿›åº¦ç›‘å¬å™¨ï¼ˆProgressListenerï¼‰

è¿›åº¦ç›‘å¬å™¨ä¸“é—¨ç”¨äºè·Ÿè¸ªå›¾æ‰§è¡Œçš„è¿›åº¦ï¼Œæä¾›å¯è§†åŒ–çš„æ‰§è¡ŒçŠ¶æ€æ›´æ–°ã€‚

```mermaid
flowchart TD
Start([èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œ]) --> CheckCustom{æ˜¯å¦æœ‰è‡ªå®šä¹‰æ­¥éª¤?}
CheckCustom --> |æ˜¯| ShowCustom[æ˜¾ç¤ºè‡ªå®šä¹‰æ¶ˆæ¯]
CheckCustom --> |å¦| ShowDefault[æ˜¾ç¤ºé»˜è®¤æ¶ˆæ¯]
ShowCustom --> Timing{æ˜¯å¦æ˜¾ç¤ºæ—¶é—´?}
ShowDefault --> Timing
Timing --> |æ˜¯| AddTimestamp[æ·»åŠ æ—¶é—´æˆ³]
Timing --> |å¦| Output[è¾“å‡ºæ¶ˆæ¯]
AddTimestamp --> Output
Output --> CheckDetails{æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯?}
CheckDetails --> |æ˜¯| AddState[æ·»åŠ çŠ¶æ€ä¿¡æ¯]
CheckDetails --> |å¦| Complete[å®Œæˆ]
AddState --> Complete
```

**å›¾è¡¨æ¥æº**
- [graph/builtin_listeners.go](file://graph/builtin_listeners.go#L70-L116)

**å…³é”®ç‰¹æ€§ï¼š**
- æ”¯æŒè‡ªå®šä¹‰èŠ‚ç‚¹æ­¥éª¤æè¿°
- å¯é…ç½®çš„æ—¶é—´æ˜¾ç¤º
- è¯¦ç»†çš„æ‰§è¡ŒçŠ¶æ€è·Ÿè¸ª
- å¤šç§è¾“å‡ºæ ¼å¼æ”¯æŒ

### æ—¥å¿—ç›‘å¬å™¨ï¼ˆLoggingListenerï¼‰

æ—¥å¿—ç›‘å¬å™¨æä¾›ç»“æ„åŒ–çš„æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œæ”¯æŒä¸åŒçº§åˆ«çš„æ—¥å¿—è¾“å‡ºã€‚

**é…ç½®é€‰é¡¹ï¼š**
- `WithLogLevel`: è®¾ç½®æœ€å°æ—¥å¿—çº§åˆ«ï¼ˆDebugã€Infoã€Warnã€Errorï¼‰
- `WithState`: æ§åˆ¶æ˜¯å¦åŒ…å«æ‰§è¡ŒçŠ¶æ€ä¿¡æ¯

### æ€§èƒ½ç›‘æ§ç›‘å¬å™¨ï¼ˆMetricsListenerï¼‰

æ€§èƒ½ç›‘æ§ç›‘å¬å™¨æ”¶é›†è¯¦ç»†çš„æ‰§è¡ŒæŒ‡æ ‡ï¼Œä¸ºæ€§èƒ½åˆ†æå’Œä¼˜åŒ–æä¾›æ•°æ®æ”¯æŒã€‚

**æ”¶é›†çš„æŒ‡æ ‡ï¼š**
- èŠ‚ç‚¹æ‰§è¡Œæ¬¡æ•°ç»Ÿè®¡
- å¹³å‡æ‰§è¡Œæ—¶é—´è®¡ç®—
- é”™è¯¯å‘ç”Ÿé¢‘ç‡ç»Ÿè®¡
- æ€»ä½“æ‰§è¡Œè®¡æ•°

```mermaid
sequenceDiagram
participant Node as "èŠ‚ç‚¹"
participant ML as "MetricsListener"
participant Storage as "å†…éƒ¨å­˜å‚¨"
Node->>ML : NodeEventStart
ML->>Storage : è®°å½•å¼€å§‹æ—¶é—´
ML->>Storage : å¢åŠ æ€»æ‰§è¡Œè®¡æ•°
Node->>ML : NodeEventComplete/Error
ML->>Storage : è®¡ç®—æ‰§è¡Œæ—¶é—´
ML->>Storage : æ›´æ–°èŠ‚ç‚¹æ‰§è¡Œç»Ÿè®¡
ML->>Storage : æ›´æ–°é”™è¯¯ç»Ÿè®¡å¦‚æœé€‚ç”¨
```

**å›¾è¡¨æ¥æº**
- [graph/builtin_listeners.go](file://graph/builtin_listeners.go#L222-L249)

### ç”¨æˆ·äº¤äº’åé¦ˆç›‘å¬å™¨ï¼ˆChatListenerï¼‰

èŠå¤©é£æ ¼çš„ç›‘å¬å™¨æä¾›å‹å¥½çš„ç”¨æˆ·äº¤äº’ä½“éªŒï¼Œæ¨¡æ‹Ÿæœºå™¨äººå¯¹è¯å¼çš„åé¦ˆã€‚

**ç‰¹è‰²åŠŸèƒ½ï¼š**
- è‡ªå®šä¹‰èŠ‚ç‚¹æ¶ˆæ¯
- æ—¶é—´æˆ³æ˜¾ç¤ºæ§åˆ¶
- æœºå™¨äººè¡¨æƒ…ç¬¦å·æ”¯æŒ
- å®æ—¶çŠ¶æ€æ›´æ–°

**ç« èŠ‚æ¥æº**
- [graph/builtin_listeners.go](file://graph/builtin_listeners.go#L14-L433)

## ç›‘å¬å™¨é…ç½®ä¸ä½¿ç”¨

### åŸºæœ¬é…ç½®æ¨¡å¼

ç›‘å¬å™¨å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æ·»åŠ åˆ°èŠ‚ç‚¹æˆ–æ•´ä¸ªå›¾ä¸­ï¼š

```mermaid
flowchart LR
subgraph "èŠ‚ç‚¹çº§é…ç½®"
A[åˆ›å»ºèŠ‚ç‚¹] --> B[æ·»åŠ ç›‘å¬å™¨]
B --> C[é…ç½®ç›‘å¬å™¨é€‰é¡¹]
end
subgraph "å…¨å±€é…ç½®"
D[åˆ›å»ºå›¾] --> E[æ·»åŠ å…¨å±€ç›‘å¬å™¨]
E --> F[æ‰€æœ‰èŠ‚ç‚¹è‡ªåŠ¨åº”ç”¨]
end
subgraph "ç»„åˆé…ç½®"
G[å¤šç›‘å¬å™¨ç»„åˆ] --> H[ä¸ªæ€§åŒ–æ¶ˆæ¯è®¾ç½®]
H --> I[å·®å¼‚åŒ–è¡Œä¸ºé…ç½®]
end
```

**å›¾è¡¨æ¥æº**
- [examples/listeners/main.go](file://examples/listeners/main.go#L50-L64)

### é€‰é¡¹å®šåˆ¶

æ¯ä¸ªç›‘å¬å™¨éƒ½æä¾›äº†ä¸°å¯Œçš„é…ç½®é€‰é¡¹ï¼š

| ç›‘å¬å™¨ç±»å‹ | å…³é”®é€‰é¡¹ | æè¿° |
|-----------|---------|------|
| ProgressListener | `WithTiming()` | å¯ç”¨/ç¦ç”¨æ—¶é—´æ˜¾ç¤º |
| | `WithDetails()` | å¯ç”¨/ç¦ç”¨è¯¦ç»†çŠ¶æ€ä¿¡æ¯ |
| | `WithPrefix()` | è‡ªå®šä¹‰æ¶ˆæ¯å‰ç¼€ |
| LoggingListener | `WithLogLevel()` | è®¾ç½®æ—¥å¿—çº§åˆ« |
| | `WithState()` | æ§åˆ¶çŠ¶æ€ä¿¡æ¯åŒ…å« |
| MetricsListener | æ— é…ç½®é€‰é¡¹ | è‡ªåŠ¨æ”¶é›†æ‰€æœ‰æŒ‡æ ‡ |
| ChatListener | `WithTime()` | å¯ç”¨/ç¦ç”¨æ—¶é—´æˆ³ |

### ä¸ªæ€§åŒ–æ¶ˆæ¯é…ç½®

é€šè¿‡ `SetNodeMessage` å’Œ `SetNodeStep` æ–¹æ³•å¯ä»¥ä¸ºç‰¹å®šèŠ‚ç‚¹è®¾ç½®ä¸ªæ€§åŒ–çš„æ¶ˆæ¯ï¼š

**è¿›åº¦ç›‘å¬å™¨æ­¥éª¤é…ç½®ï¼š**
- `SetNodeStep("process", "Processing input data")`
- `SetNodeStep("analyze", "Analyzing processed data")`

**èŠå¤©ç›‘å¬å™¨æ¶ˆæ¯é…ç½®ï¼š**
- `SetNodeMessage("process", "ğŸ¤– Processing your data...")`
- `SetNodeMessage("analyze", "ğŸ” Analyzing results...")`

**ç« èŠ‚æ¥æº**
- [examples/listeners/main.go](file://examples/listeners/main.go#L16-L69)

## æµå¼å¤„ç†é›†æˆ

ç›‘å¬å™¨ç³»ç»Ÿä¸æµå¼å¤„ç†å®Œç¾é›†æˆï¼Œæ”¯æŒå®æ—¶äº‹ä»¶æ¨é€å’Œå¼‚æ­¥å¤„ç†ã€‚

### æµå¼ç›‘å¬å™¨æ¶æ„

```mermaid
sequenceDiagram
participant App as "åº”ç”¨ç¨‹åº"
participant SR as "StreamingRunnable"
participant SL as "StreamingListener"
participant LN as "ListenableNode"
participant NC as "NodeChannel"
App->>SR : Stream(initialState)
SR->>SL : åˆ›å»ºäº‹ä»¶é€šé“
SR->>LN : æ·»åŠ ç›‘å¬å™¨
SR->>LN : æ‰§è¡ŒèŠ‚ç‚¹
LN->>SL : OnNodeEvent()
SL->>NC : å‘é€StreamEvent
NC->>App : å®æ—¶äº‹ä»¶æ¨é€
Note over App,NC : æµå¼å¤„ç†æŒç»­è¿›è¡Œ
SR->>LN : æ¸…ç†ç›‘å¬å™¨
SR->>NC : å…³é—­é€šé“
NC->>App : å®Œæˆä¿¡å·
```

**å›¾è¡¨æ¥æº**
- [graph/streaming.go](file://graph/streaming.go#L290-L357)

### æµå¼é…ç½®é€‰é¡¹

æµå¼å¤„ç†æ”¯æŒå¤šç§é…ç½®æ¨¡å¼ï¼š

| é…ç½®æ¨¡å¼ | æè¿° | ä½¿ç”¨åœºæ™¯ |
|---------|------|----------|
| `StreamModeUpdates` | ä»…å‘é€èŠ‚ç‚¹è¾“å‡ºæ›´æ–° | å®æ—¶çŠ¶æ€åŒæ­¥ |
| `StreamModeValues` | å‘é€å®Œæ•´çŠ¶æ€å€¼ | æ•°æ®å¯è§†åŒ– |
| `StreamModeMessages` | å‘é€LLMæ¶ˆæ¯/ä»¤ç‰Œ | å¯¹è¯å¼åº”ç”¨ |
| `StreamModeDebug` | å‘é€æ‰€æœ‰äº‹ä»¶ | è°ƒè¯•å’Œç›‘æ§ |

### å®æ—¶äº‹ä»¶å¤„ç†

æµå¼å¤„ç†æä¾›äº†å¼ºå¤§çš„äº‹ä»¶å¤„ç†èƒ½åŠ›ï¼š

```mermaid
flowchart TD
A[å¼€å§‹æµå¼æ‰§è¡Œ] --> B[åˆ›å»ºäº‹ä»¶é€šé“]
B --> C[æ³¨å†Œå›è°ƒå¤„ç†å™¨]
C --> D[æ¥æ”¶å®æ—¶äº‹ä»¶]
D --> E{äº‹ä»¶ç±»å‹}
E --> |çŠ¶æ€æ›´æ–°| F[UIæ›´æ–°]
E --> |é”™è¯¯| G[é”™è¯¯å¤„ç†]
E --> |å®Œæˆ| H[æœ€ç»ˆç»“æœ]
F --> I[ç»§ç»­ç›‘å¬]
G --> J[åœæ­¢æµ]
H --> J
I --> D
```

**å›¾è¡¨æ¥æº**
- [examples/streaming_modes/main.go](file://examples/streaming_modes/main.go#L42-L51)

**ç« èŠ‚æ¥æº**
- [graph/streaming.go](file://graph/streaming.go#L1-L476)
- [examples/streaming_modes/main.go](file://examples/streaming_modes/main.go#L1-L55)

## æœ€ä½³å®è·µ

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **é¿å…åœ¨ç›‘å¬å™¨ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ**
   - ç›‘å¬å™¨è¿è¡Œåœ¨ä¸»æ‰§è¡Œæµç¨‹ä¸­ï¼Œåº”ä¿æŒè½»é‡çº§
   - é¿å…æ•°æ®åº“æŸ¥è¯¢ã€ç½‘ç»œè¯·æ±‚ç­‰é˜»å¡æ“ä½œ
   - ä½¿ç”¨å¼‚æ­¥å¤„ç†æˆ–é˜Ÿåˆ—æœºåˆ¶å¤„ç†å¤æ‚é€»è¾‘

2. **åˆç†é€‰æ‹©ç›‘å¬å™¨ç±»å‹**
   - æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„ç›‘å¬å™¨ç»„åˆ
   - ä¸è¦åŒæ—¶å¯ç”¨å¤šä¸ªç›¸ä¼¼åŠŸèƒ½çš„ç›‘å¬å™¨
   - åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è°¨æ…ä½¿ç”¨è¯¦ç»†æ—¥å¿—

3. **å†…å­˜ç®¡ç†**
   - å®šæœŸé‡ç½®MetricsListenerä»¥é¿å…å†…å­˜æ³„æ¼
   - ç›‘æ§æµå¼å¤„ç†çš„ç¼“å†²åŒºå¤§å°
   - å®ç°é€‚å½“çš„èƒŒå‹å¤„ç†æœºåˆ¶

### ç›‘å¬å™¨è®¾è®¡åŸåˆ™

```mermaid
mindmap
root((ç›‘å¬å™¨è®¾è®¡))
æ€§èƒ½
è½»é‡çº§å¤„ç†
å¼‚æ­¥æ“ä½œ
ç¼“å­˜ç­–ç•¥
å¯é æ€§
é”™è¯¯å¤„ç†
èµ„æºæ¸…ç†
è¶…æ—¶æ§åˆ¶
å¯ç»´æŠ¤æ€§
å•ä¸€èŒè´£
æ¥å£æ¸…æ™°
æ–‡æ¡£å®Œæ•´
å¯æ‰©å±•æ€§
æ’ä»¶æ¶æ„
é…ç½®çµæ´»
å…¼å®¹æ€§å¼º
```

### å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ | ç¤ºä¾‹ä»£ç è·¯å¾„ |
|------|---------|-------------|
| ç›‘å¬å™¨é˜»å¡ä¸»æµç¨‹ | ä½¿ç”¨å¼‚æ­¥å¤„ç† | [graph/listeners.go](file://graph/listeners.go#L137-L156) |
| å†…å­˜æ³„æ¼ | å®šæœŸæ¸…ç†èµ„æº | [graph/builtin_listeners.go](file://graph/builtin_listeners.go#L341-L351) |
| äº‹ä»¶ä¸¢å¤± | å®ç°èƒŒå‹å¤„ç† | [graph/streaming.go](file://graph/streaming.go#L252-L261) |
| é…ç½®æ··ä¹± | ç»Ÿä¸€é…ç½®ç®¡ç† | [examples/listeners/main.go](file://examples/listeners/main.go#L16-L29) |

### ç›‘æ§å’Œè°ƒè¯•æŠ€å·§

1. **ä½¿ç”¨MetricsListenerè¿›è¡Œæ€§èƒ½åˆ†æ**
   - ç›‘æ§èŠ‚ç‚¹æ‰§è¡Œæ—¶é—´å’Œé¢‘ç‡
   - è¯†åˆ«æ€§èƒ½ç“¶é¢ˆå’Œå¼‚å¸¸æƒ…å†µ
   - ä¸ºä¼˜åŒ–æä¾›æ•°æ®æ”¯æŒ

2. **ç»“åˆLoggingListenerè¿›è¡Œè°ƒè¯•**
   - è®¾ç½®é€‚å½“çš„æ—¥å¿—çº§åˆ«
   - åŒ…å«å¿…è¦çš„ä¸Šä¸‹æ–‡ä¿¡æ¯
   - ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—æ ¼å¼

3. **å®æ—¶ç›‘æ§æµå¼äº‹ä»¶**
   - å®ç°äº‹ä»¶è¿‡æ»¤å’Œèšåˆ
   - è®¾ç½®å‘Šè­¦é˜ˆå€¼
   - è®°å½•å…³é”®äº‹ä»¶è½¨è¿¹

**ç« èŠ‚æ¥æº**
- [graph/builtin_listeners.go](file://graph/builtin_listeners.go#L202-L351)
- [graph/streaming.go](file://graph/streaming.go#L84-L109)

## æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§é—®é¢˜è¯Šæ–­

1. **ç›‘å¬å™¨ä¸è§¦å‘**
   - æ£€æŸ¥ç›‘å¬å™¨æ˜¯å¦æ­£ç¡®æ·»åŠ åˆ°èŠ‚ç‚¹
   - éªŒè¯äº‹ä»¶ç±»å‹æ˜¯å¦åŒ¹é…
   - ç¡®è®¤ç›‘å¬å™¨é…ç½®æ˜¯å¦æ­£ç¡®

2. **æ€§èƒ½é—®é¢˜**
   - åˆ†æç›‘å¬å™¨æ‰§è¡Œæ—¶é—´
   - æ£€æŸ¥æ˜¯å¦å­˜åœ¨é˜»å¡æ“ä½œ
   - ä¼˜åŒ–äº‹ä»¶å¤„ç†é€»è¾‘

3. **å†…å­˜æ³„æ¼**
   - ç›‘æ§MetricsListenerçš„æ•°æ®å¢é•¿
   - æ£€æŸ¥æµå¼å¤„ç†çš„èµ„æºæ¸…ç†
   - å®ç°å®šæœŸæ¸…ç†æœºåˆ¶

### è°ƒè¯•å·¥å…·å’ŒæŠ€æœ¯

```mermaid
flowchart LR
A[é—®é¢˜å‘ç°] --> B[æ—¥å¿—åˆ†æ]
B --> C[æ€§èƒ½ç›‘æ§]
C --> D[äº‹ä»¶è¿½è¸ª]
D --> E[é…ç½®éªŒè¯]
E --> F[è§£å†³æ–¹æ¡ˆå®æ–½]
F --> G[æ•ˆæœéªŒè¯]
G --> H{é—®é¢˜è§£å†³?}
H --> |å¦| B
H --> |æ˜¯| I[æ–‡æ¡£æ›´æ–°]
```

### ç›‘æ§æŒ‡æ ‡å‚è€ƒ

| æŒ‡æ ‡ç±»å‹ | ç›‘æ§ç›®æ ‡ | æ­£å¸¸èŒƒå›´ | å¼‚å¸¸å¤„ç† |
|---------|---------|---------|---------|
| æ‰§è¡Œæ—¶é—´ | èŠ‚ç‚¹å¹³å‡æ‰§è¡Œæ—¶é—´ | < 100ms | æ€§èƒ½åˆ†æ |
| é”™è¯¯ç‡ | èŠ‚ç‚¹é”™è¯¯å‘ç”Ÿç‡ | < 1% | é”™è¯¯å¤„ç† |
| äº‹ä»¶é¢‘ç‡ | äº‹ä»¶å‘é€é€Ÿç‡ | ç¨³å®š | èƒŒå‹å¤„ç† |
| å†…å­˜ä½¿ç”¨ | ç›‘å¬å™¨å†…å­˜å ç”¨ | < 100MB | èµ„æºæ¸…ç† |

**ç« èŠ‚æ¥æº**
- [graph/builtin_listeners_test.go](file://graph/builtin_listeners_test.go#L182-L268)

## æ€»ç»“

LangGraphGo çš„ç›‘å¬å™¨ç³»ç»Ÿæä¾›äº†å¼ºå¤§è€Œçµæ´»çš„å¯è§‚æµ‹æ€§æ”¯æŒã€‚é€šè¿‡åˆç†ä½¿ç”¨å†…ç½®ç›‘å¬å™¨ç±»å‹ï¼Œç»“åˆæµå¼å¤„ç†èƒ½åŠ›ï¼Œå¯ä»¥æ„å»ºå‡ºå…·æœ‰å®æ—¶åé¦ˆå’Œå…¨é¢ç›‘æ§çš„åº”ç”¨ç¨‹åºã€‚

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**
- å¤šæ ·åŒ–çš„ç›‘å¬å™¨ç±»å‹æ»¡è¶³ä¸åŒéœ€æ±‚
- æµå¼å¤„ç†æ”¯æŒå®ç°å®æ—¶äº‹ä»¶æ¨é€
- çµæ´»çš„é…ç½®é€‰é¡¹é€‚åº”å„ç§ä½¿ç”¨åœºæ™¯
- è‰¯å¥½çš„æ€§èƒ½è®¾è®¡é¿å…å½±å“ä¸»æµç¨‹

**æ¨èä½¿ç”¨åœºæ™¯ï¼š**
- å¼€å‘é˜¶æ®µçš„è°ƒè¯•å’Œæµ‹è¯•
- ç”Ÿäº§ç¯å¢ƒçš„ç›‘æ§å’Œå‘Šè­¦
- ç”¨æˆ·ç•Œé¢çš„çŠ¶æ€åé¦ˆ
- æ€§èƒ½åˆ†æå’Œä¼˜åŒ–

é€šè¿‡éµå¾ªæœ€ä½³å®è·µå’Œåˆç†é…ç½®ï¼Œç›‘å¬å™¨ç³»ç»Ÿèƒ½å¤Ÿæ˜¾è‘—æå‡åº”ç”¨ç¨‹åºçš„å¯è§‚æµ‹æ€§å’Œç”¨æˆ·ä½“éªŒï¼Œä¸ºæ„å»ºé«˜è´¨é‡çš„å›¾æ‰§è¡Œåº”ç”¨æä¾›é‡è¦ä¿éšœã€‚